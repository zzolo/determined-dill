"use strict";!function(){var t=window.pickleJumper=window.pickleJumper||{};t.states=t.states||{},t.states.Gameover=function(){Phaser.State.call(this)},t.states.Gameover.prototype=Object.create(Phaser.State.prototype),t.states.Gameover.prototype.constructor=t.states.Gameover,_.extend(t.states.Gameover.prototype,Phaser.State.prototype,{preload:function(){},create:function(){this.game.stage.backgroundColor="#52a363",this.titleText=this.game.add.text(.5*this.game.world.width,.1*this.game.world.height,"Game over",{font:"bold "+this.game.world.height/10+"px Arial",fill:"#fff",align:"center"}),this.titleText.anchor.set(.5),this.score=this.game.pickle.score,this.game.pickle.isHighscore(this.score)&&this.highscoreInput(),this.game.pickle.isHighestScore(this.score)&&this.highestScore(),this.highscoreList(),this.replayText=this.game.add.text(.5*this.game.world.width,.9*this.game.world.height,"Restart",{font:"bold "+this.game.height/20+"px Arial",fill:"#fff",align:"center",cursor:"pointer"}),this.replayText.anchor.set(.5),this.replayText.inputEnabled=!0,this.replayText.events.onInputOver.add(function(){this.replayText.originalFill=this.replayText.fill,this.replayText.fill="green"},this),this.replayText.events.onInputOut.add(function(){this.replayText.fill=this.replayText.originalFill},this),this.replayText.events.onInputDown.add(this.replay,this),this.leftButton=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightButton=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.upButton=this.game.input.keyboard.addKey(Phaser.Keyboard.UP),this.downButton=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.actionButton=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.leftButton.onDown.add(function(){this.hInput&&this.moveCursor(-1)},this),this.rightButton.onDown.add(function(){this.hInput&&this.moveCursor(1)},this),this.upButton.onDown.add(function(){this.hInput&&this.moveLetter(1)},this),this.downButton.onDown.add(function(){this.hInput&&this.moveLetter(-1)},this),this.actionButton.onDown.add(function(){this.hInput?this.saveHighscore():this.replay()},this)},update:function(){},shutdown:function(){["titleText","replayText"].forEach(_.bind(function(t){this[t]&&this[t].destroy&&(this[t].destroy(),this[t]=null)},this))},replay:function(){this.game.state.start("play")},highestScore:function(){this.highestScoreText=this.game.add.text(.5*this.game.world.width,.25*this.game.world.height,"You got the\nhighest score!!",{font:"bold "+this.game.world.height/15+"px Arial",fill:"#fff",align:"center"}),this.highestScoreText.anchor.set(.5)},highscoreInput:function(){this.hInput=!0,this.hInputIndex=0,this.hInputs=this.game.add.group();var t=new Phaser.Text(this.game,.33333*this.game.world.width,.5*this.game.world.height,"A",{font:"bold "+this.game.world.height/15+"px Arial",fill:"#FFFFFF",align:"center"});t.anchor.set(.5),this.hInputs.add(t);var e=new Phaser.Text(this.game,.5*this.game.world.width,.5*this.game.world.height,"A",{font:"bold "+this.game.world.height/15+"px Arial",fill:"#FFFFFF",align:"center"});e.anchor.set(.5),this.hInputs.add(e);var i=new Phaser.Text(this.game,.66666*this.game.world.width,.5*this.game.world.height,"A",{font:"bold "+this.game.world.height/15+"px Arial",fill:"#FFFFFF",align:"center"});i.anchor.set(.5),this.hInputs.add(i),this.hCursor=this.game.add.text(t.x,t.y-this.game.world.height/20,"_",{font:"bold "+this.game.world.height/5+"px Arial",fill:"#FFFFFF",align:"center"}),this.hCursor.anchor.set(.5),this.moveCursor(0)},moveCursor:function(t){var e=this.hInputIndex+t;this.hInputIndex=0>e?this.hInputs.length-1:e>=this.hInputs.length?0:e;var i=this.hInputs.getChildAt(this.hInputIndex);this.hCursor.x=i.x,this.hInputs.forEach(function(t){t.fill="#FFFFFF"}),i.fill="#FFDDBB"},moveLetter:function(t){var e=this.hInputs.getChildAt(this.hInputIndex),i=e.text,h="A"===i&&-1===t?"Z":"Z"===i&&1===t?"A":String.fromCharCode(i.charCodeAt(0)+t);e.text=h},saveHighscore:function(){var t="";this.hInputs.forEach(function(e){t+=e.text}),"AAA"!==t&&(this.game.pickle.setHighscore(this.score,t),this.hInput=!1,this.hInputs.destroy(),this.hCursor.destroy())},highscoreList:function(){console.log(this.game.pickle),this.game.pickle.highscores.length>0&&console.log(this.game.pickle.highscores)}})}();
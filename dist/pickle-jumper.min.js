!function t(e,i,s){function h(o,r){if(!i[o]){if(!e[o]){var n="function"==typeof require&&require;if(!r&&n)return n(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return h(i?i:t)},c,c.exports,t,e,i,s)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<s.length;o++)h(s[o]);return h}({1:[function(t,e,i){!function(){"use strict";var e={Gameover:t("./pickle-jumper/state-gameover.js"),Play:t("./pickle-jumper/state-play.js"),Menu:t("./pickle-jumper/state-menu.js")},i=window.Pickle=function(t){this.options=t,this.el=this.options.el,this.$el=$(this.options.el),this.$=function(){return $(t.el).find},this.width=this.$el.width(),this.height=$(window).height(),this.fonts=["Marketing","OmnesRoman","OmnesRoman-bold","OmnesRoman-900"],this.fontUrls=["dist/pickle-jumper.css"],this.loadFonts(this.start)};_.extend(i.prototype,{start:function(){this.game=new Phaser.Game(this.width,this.height,Phaser.AUTO,this.el.replace("#","")),this.game.pickle=this,this.game.state.add("menu",e.Menu),this.game.state.add("play",e.Play),this.game.state.add("gameover",e.Gameover),this.highscoreLimit=this.options.highscoreLimit||10,this.getHighscores(),this.handleReset(),this.game.state.start("menu"),this.options.debug&&(this.resetHighscores(),this.getHighscores())},loadFonts:function(t){t=_.bind(t,this),WebFont.load({custom:{families:this.fonts},urls:this.fontUrls,classes:!1,active:t})},hideOverlay:function(t){$(this.options.parentEl).find(t).hide()},showOverlay:function(t,e){e?$(this.options.parentEl).find(t).fadeIn("fast").delay(e).fadeOut("fast"):$(this.options.parentEl).find(t).show()},getHighscores:function(){var t=window.localStorage.getItem("highscores");return t=t?JSON.parse(t):[],this.highscores=t,this.sortHighscores(),this.highscores},getHighscore:function(){return _.max(this.highscores,"score")},setHighscore:function(t,e){this.isHighscore(t)&&(this.sortHighscores(),this.highscores.length>=this.highscoreLimit&&this.highscores.shift(),this.highscores.push({name:e,score:t}),this.sortHighscores(),this.setHighscores())},sortHighscores:function(){this.highscores=_.sortBy(this.highscores,"score")},isHighscore:function(t){var e=_.min(this.highscores,"score").score;return t>e||this.highscores.length<this.highscoreLimit},isHighestScore:function(t){var e=_.max(this.highscores,"score").score||0;return t>e},setHighscores:function(){window.localStorage.setItem("highscores",JSON.stringify(this.highscores))},resetHighscores:function(){this.highscores=[],window.localStorage.removeItem("highscores")},handleReset:function(){$(window).on("keyup",_.bind(function(t){t.ctrlKey&&74===t.which&&(this.resetHighscores(),this.showOverlay(".high-reset",1e3))},this))}}),$(document).ready(function(){var t;t=new i({el:"#pickle-jumper",parentEl:".game-wrapper",highscoreLimit:4,debug:!1})})}()},{"./pickle-jumper/state-gameover.js":10,"./pickle-jumper/state-menu.js":11,"./pickle-jumper/state-play.js":12}],2:[function(t,e,i){!function(){"use strict";var t=function(t,e,i){Phaser.Sprite.call(this,t,e,i,"game-sprites","dillybean.png"),this.anchor.setTo(.5,.5),this.scale.setTo(this.game.width/5/this.width),this.hover=!1,this.setHoverSpeed(100),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0,this.body.checkCollision.up=!0,this.body.checkCollision.down=!1,this.body.checkCollision.left=!1,this.body.checkCollision.right=!1,this.paddingX=10,this.getAnchorBoundsX()};t.prototype=Object.create(Phaser.Sprite.prototype),t.prototype.constructor=t,_.extend(t.prototype,{update:function(){this.hover&&(this.body.velocity.x=this.body.velocity.x||this.hoverSpeed,this.body.velocity.x=this.x<=this.minX?this.hoverSpeed:this.x>=this.maxX?-this.hoverSpeed:this.body.velocity.x)},setHoverSpeed:function(t){this.hoverSpeed=t+this.game.rnd.integerInRange(-50,50)},getAnchorBoundsX:function(){return this.minX=this.paddingX+this.width/2,this.maxX=this.game.width-(this.paddingX+this.width/2),[this.minX,this.maxX]},resetSettings:function(){this.reset(0,0),this.body.velocity.x=0,this.hover=!1,this.getAnchorBoundsX()}}),e.exports=t}()},{}],3:[function(t,e,i){!function(){"use strict";var t=function(t,e,i){Phaser.Sprite.call(this,t,e,i,"game-sprites","botchy.png"),this.anchor.setTo(.5,.5),this.scale.setTo(this.game.width/10/this.width),this.hover=!0,this.setHoverSpeed(100),this.hoverRange=100,this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0;var s=.8;this.body.setSize(this.width*s,this.height*s,(this.width-this.width*s)/2,(this.height-this.height*s)/2),this.paddingX=10,this.resetPlacement(e,i)};t.prototype=Object.create(Phaser.Sprite.prototype),t.prototype.constructor=t,_.extend(t.prototype,{update:function(){this.hover&&(this.body.velocity.x=this.body.velocity.x||this.hoverSpeed,this.body.velocity.x=this.x<=this.minX?this.hoverSpeed:this.x>=this.maxX?-this.hoverSpeed:this.body.velocity.x)},setHoverSpeed:function(t){this.hoverSpeed=t+this.game.rnd.integerInRange(-25,25)},getAnchorBoundsX:function(){return this.minX=Math.max(this.x-this.hoverRange,this.paddingX+this.width/2),this.maxX=Math.min(this.x+this.hoverRange,this.game.width-(this.paddingX+this.width/2)),[this.minX,this.maxX]},resetPlacement:function(t,e){this.reset(t,e),this.body.velocity.x=0,this.getAnchorBoundsX()},resetImage:function(){this.height=this.originalHeight,this.width=this.originalWidth,this.alpha=1},murder:function(){this.originalHeight=this.height,this.originalWidth=this.width;var t=this.game.add.tween(this).to({height:0,width:0,alpha:0},200,Phaser.Easing.Linear.None,!0);t.onComplete.add(_.bind(function(){this.resetImage(),this.kill()},this))}}),e.exports=t}()},{}],4:[function(t,e,i){!function(){"use strict";var t=function(t,e,i){Phaser.Sprite.call(this,t,e,i,"carrot-sprites","carrot-snap-01.png"),this.anchor.setTo(.5,.5),this.scale.setTo(this.game.width/5/this.width),this.hover=!1,this.setHoverSpeed(100),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0,this.body.checkCollision.up=!0,this.body.checkCollision.down=!1,this.body.checkCollision.left=!1,this.body.checkCollision.right=!1,this.paddingX=10,this.getAnchorBoundsX();var s=Phaser.Animation.generateFrameNames("carrot-snap-",1,5,".png",2);this.snapAnimation=this.animations.add("snap",s),this.snapAnimation.onComplete.add(this.snapped,this)};t.prototype=Object.create(Phaser.Sprite.prototype),t.prototype.constructor=t,_.extend(t.prototype,{update:function(){this.hover&&(this.body.velocity.x=this.body.velocity.x||this.hoverSpeed,this.body.velocity.x=this.x<=this.minX?this.hoverSpeed:this.x>=this.maxX?-this.hoverSpeed:this.body.velocity.x)},setHoverSpeed:function(t){this.hoverSpeed=t+this.game.rnd.integerInRange(-50,50)},getAnchorBoundsX:function(){return this.minX=this.paddingX+this.width/2,this.maxX=this.game.width-(this.paddingX+this.width/2),[this.minX,this.maxX]},resetSettings:function(){this.resetImage(),this.reset(0,0),this.body.velocity.x=0,this.hover=!1,this.getAnchorBoundsX()},resetImage:function(){this.alpha=1,this.loadTexture("carrot-sprites","carrot-snap-01.png")},snap:function(){this.animations.play("snap",15,!1,!1)},snapped:function(){var t=this.game.add.tween(this).to({alpha:0},200,Phaser.Easing.Linear.None,!0);t.onComplete.add(_.bind(function(){this.resetImage(),this.kill()},this))}}),e.exports=t}()},{}],5:[function(t,e,i){!function(){"use strict";var t=function(t,e,i){Phaser.Sprite.call(this,t,e,i,"game-sprites","dill.png"),this.anchor.setTo(.5,.5),this.scale.setTo(this.game.width/9/this.width),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0};t.prototype=Object.create(Phaser.Sprite.prototype),t.prototype.constructor=t,_.extend(t.prototype,{update:function(){}}),e.exports=t}()},{}],6:[function(t,e,i){!function(){"use strict";var t=function(t,e,i){Phaser.Sprite.call(this,t,e,i,"pickle-sprites","pickle-jump-02.png"),this.anchor.setTo(.5),this.originalScale=this.game.width/22/this.width,this.scale.setTo(this.originalScale),this.game.physics.arcade.enableBody(this),this.isDead=!1,this.yOrig=this.y,this.yChange=0;var s=Phaser.Animation.generateFrameNames("pickle-jump-",1,4,".png",2),h=Phaser.Animation.generateFrameNames("pickle-jump-",4,1,".png",2);this.jumpUp=this.animations.add("jump-up",s),this.JumpDown=this.animations.add("jump-down",h),this.jump=this.animations.add("jump",s.concat(h))};t.prototype=Object.create(Phaser.Sprite.prototype),t.prototype.constructor=t,_.extend(t.prototype,{update:function(){var t,e;this.yChange=Math.max(this.yChange,Math.abs(this.y-this.yOrig)),this.game.world.wrap(this,this.width/2,!1,!0,!1),this.body.velocity.y>0&&this.goingUp?(this.onFire=!1,this.goingUp=!1,this.doJumpDown()):this.body.velocity.y<0&&!this.goingUp&&(this.goingUp=!0,this.doJumpUp()),this.onFire&&(t=this.game.rnd.integerInRange(-4,4),e=this.game.rnd.integerInRange(-2,2),this.position.x+=t,this.position.y+=e)},resetPlacement:function(t,e){this.reset(t,e),this.yOrig=this.y,this.yChange=0},doJumpUp:function(){this.onFire||this.isDead||this.animations.play("jump-up",15,!1)},doJumpDown:function(){this.onFire||this.isDead||this.animations.play("jump-down",15,!1)},setOnFire:function(){this.onFire=!0,this.loadTexture("pickle-sprites","pickle-rocket.png"),this.scale.setTo(1.5*this.originalScale)},putOutFire:function(){this.scale.setTo(this.originalScale),this.onFire=!1},botchyMuder:function(){this.isDead=!0,this.loadTexture("pickle-sprites","pickle-botchy.png");var t=this.game.add.tween(this).to({angle:175},500,Phaser.Easing.Linear.None,!0);t.onComplete.add(_.bind(function(){},this))}}),e.exports=t}()},{}],7:[function(t,e,i){!function(){"use strict";var t=function(t,e,i){Phaser.Sprite.call(this,t,e,i,"game-sprites","jar.png"),this.anchor.setTo(.5,.5),this.scale.setTo(this.game.width/2/this.width),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0};t.prototype=Object.create(Phaser.Sprite.prototype),t.prototype.constructor=t,_.extend(t.prototype,{update:function(){}}),e.exports=t}()},{}],8:[function(t,e,i){!function(){"use strict";var t=function(t,e,i){Phaser.Sprite.call(this,t,e,i,"game-sprites","magicdill.png"),this.anchor.setTo(.5,.5),this.scale.setTo(this.game.width/20/this.width),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0};t.prototype=Object.create(Phaser.Sprite.prototype),t.prototype.constructor=t,_.extend(t.prototype,{update:function(){}}),e.exports=t}()},{}],9:[function(t,e,i){!function(){"use strict";var t=function(t,e,i){Phaser.Sprite.call(this,t,e,i,"game-sprites","ghost-pepper.png"),this.anchor.setTo(.5,.5),this.scale.setTo(this.game.width/18/this.width),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0};t.prototype=Object.create(Phaser.Sprite.prototype),t.prototype.constructor=t,_.extend(t.prototype,{update:function(){}}),e.exports=t}()},{}],10:[function(t,e,i){!function(){"use strict";var t=function(){Phaser.State.call(this)};t.prototype=Object.create(Phaser.State.prototype),t.prototype.constructor=t,_.extend(t.prototype,Phaser.State.prototype,{preload:function(){this.game.load.atlas("gameover-sprites","assets/gameover-sprites.png","assets/gameover-sprites.json")},create:function(){this.game.stage.backgroundColor="#8cc63f",this.padding=this.game.width/50,this.titleImage=this.game.add.sprite(0,0,"gameover-sprites","gameover.png"),this.titleImage.anchor.setTo(.5,0),this.titleImage.scale.setTo((this.game.width-16*this.padding)/this.titleImage.width),this.titleImage.reset(this.centerStageX(this.titleImage),2*this.padding),this.game.add.existing(this.titleImage),this.score=this.game.pickle.score,this.showScore(),this.game.pickle.isHighscore(this.score)?this.highscoreInput():this.highscoreList(),this.replayImage=this.game.add.sprite(this.game.width-2*this.padding,this.game.height-2*this.padding,"gameover-sprites","title-play.png"),this.replayImage.anchor.setTo(1,1),this.replayImage.scale.setTo(.25*this.game.width/this.replayImage.width),this.game.add.existing(this.replayImage),this.replayImage.inputEnabled=!0,this.replayImage.events.onInputOver.add(function(){this.replayImage.originalTint=this.replayImage.tint,this.replayImage.tint=8388607.5},this),this.replayImage.events.onInputOut.add(function(){this.replayImage.tint=this.replayImage.originalTint},this),this.replayImage.events.onInputDown.add(this.replay,this),this.leftButton=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightButton=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.upButton=this.game.input.keyboard.addKey(Phaser.Keyboard.UP),this.downButton=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.actionButton=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.leftButton.onDown.add(function(){this.hInput&&this.moveCursor(-1)},this),this.rightButton.onDown.add(function(){this.hInput&&this.moveCursor(1)},this),this.upButton.onDown.add(function(){this.hInput&&this.moveLetter(1)},this),this.downButton.onDown.add(function(){this.hInput&&this.moveLetter(-1)},this),this.actionButton.onDown.add(function(){var t;this.hInput?(t=this.saveHighscore(),t&&this.highscoreList()):this.replay()},this)},update:function(){},shutdown:function(){["titleText","replayText"].forEach(_.bind(function(t){this[t]&&this[t].destroy&&(this[t].destroy(),this[t]=null)},this))},replay:function(){this.game.state.start("menu")},showScore:function(){this.scoreGroup=this.game.add.group(),this.yourScoreImage=new Phaser.Sprite(this.game,0,0,"gameover-sprites","your-score.png"),this.yourScoreImage.anchor.setTo(.5,0),this.yourScoreImage.scale.setTo((.5*this.game.width-6*this.padding)/this.yourScoreImage.width),this.yourScoreImage.reset(this.centerStageX(this.yourScoreImage),this.titleImage.height+8*this.padding),this.scoreText=new Phaser.Text(this.game,0,0,this.score.toLocaleString(),{font:""+this.game.world.height/10+"px OmnesRoman-900",fill:"#39b54a",align:"center"}),this.scoreText.anchor.setTo(.5,0),this.scoreText.reset(this.centerStageX(this.scoreText),this.titleImage.height+this.yourScoreImage.height+7*this.padding),_.delay(_.bind(function(){this.scoreGroup.add(this.yourScoreImage),this.scoreGroup.add(this.scoreText)},this),1e3)},highscoreInput:function(){this.hInput=!0,this.hInputIndex=0,this.hInputs=this.game.add.group();var t=.7*this.game.world.height,e=new Phaser.Text(this.game,.33333*this.game.world.width,t,"A",{font:""+this.game.world.height/15+"px OmnesRoman-bold",fill:"#FFFFFF",align:"center"});e.anchor.set(.5),this.hInputs.add(e);var i=new Phaser.Text(this.game,.5*this.game.world.width,t,"A",{font:""+this.game.world.height/15+"px OmnesRoman-bold",fill:"#FFFFFF",align:"center"});i.anchor.set(.5),this.hInputs.add(i);var s=new Phaser.Text(this.game,.66666*this.game.world.width,t,"A",{font:""+this.game.world.height/15+"px OmnesRoman-bold",fill:"#FFFFFF",align:"center"});s.anchor.set(.5),this.hInputs.add(s),this.hCursor=this.game.add.text(e.x,e.y-this.game.world.height/20,"_",{font:"bold "+this.game.world.height/5+"px Arial",fill:"#FFFFFF",align:"center"}),this.hCursor.anchor.set(.5),this.moveCursor(0)},moveCursor:function(t){var e=this.hInputIndex+t;this.hInputIndex=0>e?this.hInputs.length-1:e>=this.hInputs.length?0:e;var i=this.hInputs.getChildAt(this.hInputIndex);this.hCursor.x=i.x,this.hInputs.forEach(function(t){t.fill="#FFFFFF"}),i.fill="#FFDDBB"},moveLetter:function(t){var e=this.hInputs.getChildAt(this.hInputIndex),i=e.text,s="A"===i&&-1===t?"Z":"Z"===i&&1===t?"A":String.fromCharCode(i.charCodeAt(0)+t);e.text=s},saveHighscore:function(){var t="";return this.hInputs.forEach(function(e){t+=e.text}),"AAA"===t?!1:(this.game.pickle.setHighscore(this.score,t),this.hInput=!1,this.hInputs.destroy(),this.hCursor.destroy(),!0)},highscoreList:function(){this.highscoreLimit=this.game.pickle.highscoreLimit||3,this.highscoreListGroup=this.game.add.group(),this.game.pickle.sortHighscores();var t=this.game.world.height/25,e=this.titleImage.height+this.yourScoreImage.height+this.scoreText.height+10*this.padding,i=2*-this.padding;this.highscoreListLabel=new Phaser.Text(this.game,0,0,"High Scores",{font:""+this.game.world.height/17.5+"px OmnesRoman-bold",fill:"#b8f4bc",align:"right"}),this.highscoreListLabel.anchor.setTo(.5,0),this.highscoreListLabel.reset(this.centerStageX(this.highscoreListLabel),e),this.highscoreListGroup.add(this.highscoreListLabel),e=e+this.highscoreListLabel.height+.25*this.padding,this.game.pickle.highscores.length>0&&_.each(this.game.pickle.highscores.reverse().slice(0,this.highscoreLimit),_.bind(function(s,h){var a=new Phaser.Text(this.game,this.game.width/2-this.padding+i,e+(t+this.padding/2)*h,s.name,{font:""+t+"px OmnesRoman",fill:"#b8f4bc",align:"right"});a.anchor.setTo(1,0);var o=new Phaser.Text(this.game,this.game.width/2+this.padding+i,e+(t+this.padding/2)*h,s.score.toLocaleString(),{font:""+t+"px OmnesRoman",fill:"#b8f4bc",align:"left"});o.anchor.setTo(0,0),this.highscoreListGroup.add(a),this.highscoreListGroup.add(o)},this))},centerStageX:function(t){return(this.game.width-t.width)/2+t.width/2},centerStageY:function(t){return(this.game.height-t.height)/2+t.height/2}}),e.exports=t}()},{}],11:[function(t,e,i){!function(){"use strict";var t=function(){Phaser.State.call(this)};t.prototype=Object.create(Phaser.State.prototype),t.prototype.constructor=t,_.extend(t.prototype,Phaser.State.prototype,{preload:function(){this.game.load.atlas("title-sprites","assets/title-sprites.png","assets/title-sprites.json")},create:function(){this.game.stage.backgroundColor="#b8f4bc",this.padding=this.game.width/50,this.titleImage=this.game.add.sprite(0,0,"title-sprites","title.png"),this.titleImage.anchor.setTo(.5,.5),this.titleImage.scale.setTo((this.game.width-4*this.padding)/this.titleImage.width),this.titleImage.reset(this.centerStageX(this.titleImage),this.centerStageY(this.titleImage)-4*this.padding),this.game.add.existing(this.titleImage),this.playImage=this.game.add.sprite(0,0,"title-sprites","title-play.png"),this.playImage.anchor.setTo(.4,1),this.playImage.scale.setTo(.5*this.game.width/this.titleImage.width),this.playImage.reset(this.centerStageX(this.playImage),this.game.height-2*this.padding),this.game.add.existing(this.playImage),this.playImage.inputEnabled=!0,this.playImage.events.onInputOver.add(function(){this.playImage.originalTint=this.playImage.tint,this.playImage.tint=8388607.5},this),this.playImage.events.onInputOut.add(function(){this.playImage.tint=this.playImage.originalTint},this),this.playImage.events.onInputDown.add(this.go,this),this.actionButton=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.actionButton.onDown.add(function(){this.go()},this),this.game.pickle.showOverlay(".state-menu")},go:function(){this.game.pickle.hideOverlay(".state-menu"),this.game.state.start("play")},update:function(){},centerStageX:function(t){return(this.game.width-t.width)/2+t.width/2},centerStageY:function(t){return(this.game.height-t.height)/2+t.height/2}}),e.exports=t}()},{}],12:[function(t,e,i){!function(){"use strict";var i={Dill:t("./prefab-dill.js"),Pepper:t("./prefab-pepper.js"),Botulism:t("./prefab-botulism.js"),Mini:t("./prefab-mini.js"),Hero:t("./prefab-hero.js"),Bean:t("./prefab-bean.js"),Carrot:t("./prefab-carrot.js"),Jar:t("./prefab-jar.js")},s=function(){Phaser.State.call(this)};s.prototype=Object.create(Phaser.State.prototype),s.prototype.constructor=s,_.extend(s.prototype,Phaser.State.prototype,{preload:function(){this.game.load.atlas("game-sprites","assets/game-sprites.png","assets/game-sprites.json"),this.game.load.atlas("pickle-sprites","assets/pickle-sprites.png","assets/pickle-sprites.json"),this.game.load.atlas("carrot-sprites","assets/carrot-sprites.png","assets/carrot-sprites.json")},create:function(){this.createSuperLevelBG(),this.updateDifficulty(),this.scoreMini=100,this.scoreDill=500,this.scorePepper=750,this.scoreBot=1e3,this.padding=10,this.startY=this.game.height-5,this.resetViewTracking(),this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.maxWidth=this.game.width,this.game.scale.maxHeight=this.game.height,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=1e3,this.beans=this.game.add.group(),this.carrots=this.game.add.group(),this.minis=this.game.add.group(),this.dills=this.game.add.group(),this.peppers=this.game.add.group(),this.bots=this.game.add.group(),this.addPlatforms(),this.hero=new i.Hero(this.game,0,0),this.hero.resetPlacement(.5*this.game.width,this.startY-this.hero.height-50),this.game.add.existing(this.hero),this.resetScore(),this.updateScore(),this.cursors=this.game.input.keyboard.createCursorKeys(),this.actionButton=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)},update:function(){this.world.setBounds(0,-this.hero.yChange,this.game.world.width,this.game.height+this.hero.yChange),this.cameraYMin=Math.min(this.cameraYMin,this.hero.y-this.game.height/2),this.camera.y=this.cameraYMin,this.hero.y>this.cameraYMin+this.game.height+200&&this.gameOver(),this.hero.body.velocity.y>0&&this.putOutFire(),this.hero.body.velocity.x=this.cursors.left.isDown?-(this.game.physics.arcade.gravity.y/5):this.cursors.right.isDown?this.game.physics.arcade.gravity.y/5:0,this.updateCollisions(),this.updateItems(),this.updateScore(),this.updateDifficulty(),this.updateWorldShake(),this.game.pickle.options.debug&&this.game.debug.body(this.hero)},updateCollisions:function(){this.hero.isDead||(this.game.physics.arcade.collide(this.hero,this.beans,this.updateHeroPlatform,null,this),this.game.physics.arcade.collide(this.hero,this.carrots,this.updateHeroPlatform,null,this),this.game.physics.arcade.collide(this.hero,this.base,this.updateHeroPlatform,null,this),this.game.physics.arcade.overlap(this.hero,this.minis,function(t,e){e.kill(),this.updateScore(this.scoreMini)},null,this),this.onFire||this.game.physics.arcade.overlap(this.hero,this.dills,function(t,e){e.kill(),this.updateScore(this.scoreDill),t.body.velocity.y=-1*this.game.physics.arcade.gravity.y*1.5},null,this),this.game.physics.arcade.overlap(this.hero,this.peppers,function(t,e){e.kill(),this.updateScore(this.scorePepper),this.setOnFire(),t.body.velocity.y=-1*this.game.physics.arcade.gravity.y*3},null,this),this.onFire||this.game.physics.arcade.collide(this.hero,this.bots,function(t,e){t.body.touching.down?(e.murder(),this.updateScore(this.scoreBot),t.body.velocity.y=-1*this.game.physics.arcade.gravity.y*.5):(t.botchyMuder(),e.murder())},null,this))},updateHeroPlatform:function(t,e){this.putOutFire(),t.body.velocity.y=-1*this.game.physics.arcade.gravity.y*.7,e instanceof i.Carrot&&e.snap()},updateItems:function(){var t,e,i;["minis","dills","bots","peppers","beans","carrots"].forEach(_.bind(function(t){this[t].forEachAlive(function(t){t.y>this.camera.y+this.game.height&&t.kill()},this)},this)),["base"].forEach(_.bind(function(t){this[t]&&this[t].alive&&this[t].y>this.camera.y+2*this.game.height&&this[t].kill()},this)),["beans","carrots"].forEach(_.bind(function(e){this[e].forEachAlive(function(e){e.y<this.platformYMin&&(this.platformYMin=e.y,t=e)},this)},this)),i=this.carrots.getFirstDead(),e=this.beans.getFirstDead(),i&&e&&("carrot"===this.chance("platforms")?this.placePlatform(i,t,void 0,"carrot"):this.placePlatform(e,t,void 0,"bean"))},updateWorldShake:function(){if(this.shakeWorldCounter>0){var t=Math.max(this.shakeWorldCounter/50,1)+1,e=this.game.rnd.integerInRange(-4*t,4*t),i=this.game.rnd.integerInRange(-2*t,2*t);this.game.camera.x+=e,this.game.camera.y+=i,this.shakeWorldCounter--,this.shakeWorldCounter<=0&&(this.game.camera.x=0,this.game.camera.y=0)}},shutdown:function(){this.world.setBounds(0,0,this.game.width,this.game.height),this.cursor=null,this.resetViewTracking(),this.resetScore(),["hero","beans","minis","dills","peppers","carrots","scoreGroup"].forEach(_.bind(function(t){this[t]&&(this[t].destroy(),this[t]=null)},this))},gameOver:function(){this.game.pickle.score=this.score,this.game.state.start("gameover")},shake:function(t){this.shakeWorldCounter=t?this.shakeWorldCounter+t:0},addPlatforms:function(){this.base=new i.Jar(this.game,.5*this.game.width,this.startY,2*this.game.width),this.game.add.existing(this.base),_.each(_.range(10),_.bind(function(){var t=new i.Carrot(this.game,-999,2*this.game.height);this.carrots.add(t)},this));var t;_.each(_.range(20),_.bind(function(e){var s=new i.Bean(this.game,0,0);this.placePlatform(s,t,this.world.height-this.platformSpaceY-this.platformSpaceY*e),this.beans.add(s),t=s},this))},placePlatform:function(t,e,i,s){t.resetSettings(),s=void 0===s?"bean":s;var h=i||this.platformYMin-this.platformSpaceY,a=t.minX,o=t.maxX,r=this.rnd.integerInRange(a,o);e&&(r=this.rnd.integerInRange(e.x-this.platformGapMax,e.x+this.platformGapMax),r=0>r?Math.min(o,this.world.width+r):Math.max(r,a),r=r>this.world.width?Math.max(a,r-this.world.width):Math.min(r,o)),t.reset(r,h),this.fluffPlatform(t,s)},fluffPlatform:function(t,e){var i=t.x,s=t.y-t.height/2-30,h=this.chance(e+"Items");return"hover"===this.chance("hover")?void(t.hover=!0):void("mini"===h?this.addWithPool(this.minis,"Mini",i,s):"dill"===h?this.addWithPool(this.dills,"Dill",i,s):"pepper"===h?this.addWithPool(this.peppers,"Pepper",i,s):"bot"===h&&this.addWithPool(this.bots,"Botulism",i,s))},addWithPool:function(t,e,s,h){var a=t.getFirstDead();a=a||new i[e](this.game,s,h),a.resetPlacement?a.resetPlacement(s,h):a.reset(s,h),t.add(a)},updateScore:function(t){t=t||0,this.scoreUp=-this.cameraYMin>=9999999?0:Math.min(Math.max(0,-this.cameraYMin),9999998),this.scoreCollect=(this.scoreCollect||0)+t,this.score=Math.round(this.scoreUp+this.scoreCollect),this.scoreGroup?this.scoreText.text=this.score.toLocaleString():(this.scoreGroup=this.game.add.group(),this.scoreText=new Phaser.Text(this.game,this.padding,0,this.score.toLocaleString(),{font:""+this.game.world.height/30+"px OmnesRoman-bold",fill:"#39b54a",align:"left"}),this.scoreText.anchor.setTo(0,0),this.scoreText.setShadow(1,1,"rgba(0, 0, 0, 0.3)",2),this.scoreGroup.fixedToCamera=!0,this.scoreGroup.cameraOffset.setTo(this.padding,this.padding),_.delay(_.bind(function(){this.scoreGroup.add(this.scoreText)},this),1e3))},resetScore:function(){this.scoreUp=0,this.scoreCollect=0,this.score=0},resetViewTracking:function(){this.cameraYMin=9999999,this.platformYMin=9999999},isTouching:function(t){return t&&t.touch?t.touching.up||t.touching.down||t.touching.left||t.touching.right:!1},chances:{platforms:[["carrot",0],["bean",1]],hover:[["none",15],["hover",1]],carrotItems:[["none",1],["mini",0],["dill",0],["pepper",0],["bot",0]],beanItems:[["none",10],["mini",3],["dill",1],["pepper",0],["bot",0]]},levels:[[0,-100],[1,-2e4],[2,-4e4],[3,-6e4],[4,-8e4]],currentLevel:0,updateDifficulty:function(){var t;this.currentLevel=_.find(this.levels,_.bind(function(t){return 0===t[0]&&!this.cameraYMin||this.cameraYMin>t[1]},this))[0],(_.isUndefined(this.previousLevel)||this.previousLevel!==this.currentLevel)&&(this.platformSpaceY=110,this.platformGapMax=200,this.game.stage.backgroundColor="#b8f4bc",0===this.currentLevel?t=_.extend({},this.chances):1===this.currentLevel?t={platforms:[["carrot",1],["bean",15]],hover:[["none",9],["hover",1]],beanItems:[["none",15],["mini",5],["dill",5],["pepper",1],["bot",1]],carrotItems:[["none",15],["mini",5],["dill",5],["pepper",1],["bot",1]]}:2===this.currentLevel?(this.game.stage.backgroundColor="#88d1d0",t={platforms:[["carrot",1],["bean",9]],hover:[["none",8],["hover",1]],carrotItems:[["none",8],["mini",2],["dill",2],["pepper",1],["bot",1]],beanItems:[["none",8],["mini",2],["dill",2],["pepper",1],["bot",1]]}):3===this.currentLevel?(this.game.stage.backgroundColor="#59acc6",t={platforms:[["carrot",4],["bean",6]],hover:[["none",7],["hover",1]],carrotItems:[["none",6],["mini",1],["dill",2],["pepper",.5],["bot",2]],beanItems:[["none",6],["mini",1],["dill",2],["pepper",.5],["bot",2]]}):(this.bgGroup.visible=!0,t={platforms:[["carrot",8],["bean",2]],hover:[["none",7],["hover",1]],carrotItems:[["none",3],["mini",1],["dill",2],["pepper",.5],["bot",3]],beanItems:[["none",3],["mini",1],["dill",2],["pepper",.5],["bot",3]]}),this.generateChance(t),this.previousLevel=this.currentLevel)},generateChance:function(t){var e={};_.each(t,function(t,i){var s=_.reduce(t,function(t,e){return t+e[1]},0),h=[];_.reduce(t,function(t,e){return h.push({min:t,max:t+e[1],val:e[0]}),t+e[1]},0),e[i]={total:s,random:function(){return Math.random()*s},items:h}}),this.chance=function(t){var i=e[t].random(),s=_.find(e[t].items,function(t){return i>=t.min&&i<t.max});return s.val}},createSuperLevelBG:function(){this.slbgBM=this.game.make.bitmapData(this.game.width,this.game.height);var t=this.slbgBM.context.createLinearGradient(0,this.game.height/2,this.game.width,this.game.height/2);t.addColorStop(0,"#4F3F9A"),t.addColorStop(1,"#E70B8D"),this.slbgBM.context.fillStyle=t,this.slbgBM.context.fillRect(0,0,this.game.width,this.game.height),this.bgGroup=this.game.add.group(),this.bgGroup.fixedToCamera=!0,this.bgGroup.create(0,0,this.slbgBM),this.bgGroup.visible=!1},setOnFire:function(){this.onFire=!0,this.hero.setOnFire()},putOutFire:function(){this.onFire=!1,this.hero.putOutFire()}}),e.exports=s}()},{"./prefab-bean.js":2,"./prefab-botulism.js":3,"./prefab-carrot.js":4,"./prefab-dill.js":5,"./prefab-hero.js":6,"./prefab-jar.js":7,"./prefab-mini.js":8,"./prefab-pepper.js":9}]},{},[1]);